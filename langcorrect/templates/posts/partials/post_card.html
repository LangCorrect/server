{% load i18n %}
{% load humanize %}

<div class="card">
  {% include "posts/partials/card_header.html" %}
  <div class="card-body {% if not disable_stretched_link %}hoverable{% endif %}">
    <div class="position-relative">
      {% if post.prompt %}
        <div class="border-start border-2 px-2 mb-2">
          <a href="{{ post.prompt.get_absolute_url }}"
             class="link-secondary text-decoration-none">
            <i class="fa-solid fa-signature pe-1"></i>
          {{ post.prompt.content }}</a>
        </div>
      {% endif %}
      <h5>{{ post.title }}</h5>
      <p class="mb-0 truncate-text-post-card">{{ post.text|linebreaksbr }}</p>
      {% if not disable_stretched_link %}
        <a href="{{ post.get_absolute_url }}"
           class="stretched-link link-secondary"></a>
      {% endif %}
    </div>
  </div>
  <div class="card-footer bg-transparent">
    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex gap-2">
        <div class="d-flex align-items-center gap-1">
          <span class="chip">
            <i class="fa-solid fa-globe pe-1"></i>  {{ post.language.code }}
          </span>
          <span class="chip">
            <i class="fa-regular fa-circle-check pe-1"></i> {{ post.corrected_by_count }}
          </span>
        </div>
      </div>
      {% if current_user.id == user.id %}
        <a href="{% url 'posts:update' post.slug %}"
           class="btn btn-sm btn-outline-secondary">{% translate "Edit" %}</a>
      {% else %}
        <a class="btn btn-sm {% if already_corrected %} btn-primary {% else %} btn-outline-primary {% endif %}">
          <i class="fa-regular fa-circle-check"></i>
          {% if already_corrected %}
            {% translate "Corrected" %}
          {% else %}
            {% translate "Correct" %}
          {% endif %}
        </a>
      {% endif %}
    </div>
  </div>
</div>
